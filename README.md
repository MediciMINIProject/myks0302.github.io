# BangBangDefense
메디치 최종 프로젝트

개발 기간 : 2022 / 08 / 01 ~ 2022 / 09 / 15

장르 : 디펜스 / FPS / VR

개발 진행 인원 : 1인 개발(김성)

주요 코드 요약

1. 플레이어와 적
공통으로 가지고 있는 HP 부분을 구현 뒤, 이를 각각 Enemy와 Barricade에 1차로 상속시켜
우선 Barricade는 오직 1개만 존재하도록 단일화 시켰고, 이동할 필요가 없기 때문에 최초 체력만을 배정했습니다.
반면에 Enemy는 살아있고 움직이는 오브젝트이기에 사망 여부를 판가름하는 isDead bool 변수와 열거형 상수인 enum를 이용하여 몬스터 등급 변수 Rank를 구현하고, 추가적으로 목표물인 Barricade를 향해 이동하는 메소드를 구현하였습니다.
그리고 Enemy를 각각 Close, Range, Suicide에 2차 상속을 시키고 각각 목표물(Barricade)과 일정 거리가 되면 공격하도록 애니매이션을 연동시켜 일정 간격마다 체력이 줄어들도록 구현하는 동시에 추가적으로 체력이 0가 되면 사망모션 뒤, 일정시간 뒤에 사라지는 변수인 OnDisable()를 구현했고 추가적으로 Enemy의 몬스터 등급 변수 Rank에 따라 체력이 최초 생성시에 다르게 배정이 되도록 했습니다.

2. 무기
무기의 부분에서는 크게 주로 공격하는 "주무장"과 보조적으로 공격이 가능한 "부무장"의 2가지 부분으로 나누어서 진행했습니다.
우선 주 무장의 경우에는 처음에는 기존 FPS에서 자주 사용하는 히트 스캔방식으로 구현하려고 했으며, 제대로 적을 인식하지 못하는 상황이 생겨, 별도의 발사체를 만들고 이를 날리는 형태로 방향성을 바꾸어 진행했습니다. 그 후로는 Enemy에서 사용했던 eunm를 사용해서 총의 종류를 구현하고 이에 맞추어 장탄수와 탄환의 위력, 재장전 시간의 변수를 각각 다르게 배정할 수 있도록 하 고 추가적으로 코루틴(Corotine)을 사용하여 재장전 IEnumerator Reload()을 구현하였습니다.
반면 부 주장의 경우에는 서로 다른 형태의 탄환을 1차적으로 구현한 뒤에, 이를 가져와 총구에서 날려보내는 형태로 구현하였습니다. 
산탄총의 경우에는 1개의 소형 탄환을 만든 뒤에 배열을 이용해 이를 10개 정도 한꺼번에 생성 한 뒤, 배열의 각각의 변수에 Rotate를 랜덤한 값으로 바꾸어서 전방으로 날려보내는 형태로 구현했습니다.
저격총의 경우에는 관통효과를 부여하기 위해 OnTriggerEnter과 관통 제한 변수를 만든 뒤에, 적 1기를 관통 할 수록 관통 제한 횟수를 1씩 줄이면서 0가 되면 Destroy하도록 구현했습니다.
마지막으로 유탄의 경우, 어딘가에 부딧치면 부딫친 곳을 중심으로 OverlapSphere를 이용하여 다수의 적을 감지하고 이를 배열에 저장하고 이의 변수들에게 각각의 HP를 감소시키는 매커니즘을 구현하였습니다.

3. 게임의 흐름
게임의 흐름은 최종라운드까지 목표물(Barricade)의 체력이 0 이하로 떨어지지 않게 적들을 막아내는 것이 최종 목표입니다.
우선 여러 개의 스폰 포인트를 만들어 이를 하나로 묶고, 여기에 SpawnSystem를 구현하여 그 중에서 하나의 위치에서 몬스터가 소환되게 구현하였습니다.
그 다음으로 몬스터가 사망할 때마다 남은 적수를 1개씩 감소 시키고 이가 0이 될 때, 일시적으로 게임을 정지시키고 랜덤으로 3개의 능력치 강화 선택지가 주어지고 이를 1개 선택했을때 다음라운드로 이동하도록 구현했습니다.
추가적으로 몬스터를 쓰러트렸을 때에, 랜덤으로 체력 회복이나 장탄 초기화 아이템이 드롭되는 기능도 구현하여 난이도를 조정했습니다. 
